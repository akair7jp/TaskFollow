<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>タスク管理 - TaskFollow</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        
        :root { --primary: #5b50f2; --bg: #f8f9fc; }
        
        body { 
            font-family: 'Inter', "San Francisco", "Yu Gothic", "Meiryo", "Hiragino Sans", "Roboto", sans-serif; 
            background: var(--bg); margin: 0; color: #333; 
        }

        header { background: white; padding: 15px 40px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; align-items: center; }
        .u-area { position: relative; cursor: pointer; font-weight: 600; }
        
        /* 統計カード [7] */
        .stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px 40px; }
        .stat-card { background: white; padding: 25px; border-radius: 1.25rem; border: 1px solid #eee; display: flex; align-items: center; gap: 15px; }
        .ic-box { width: 45px; height: 45px; border-radius: 0.75rem; display: flex; align-items: center; justify-content: center; font-size: 18px; }

        /* 一括操作バー [1, 6] */
        .bulk-bar { display: none; background: var(--primary); color: white; margin: 0 40px 20px; padding: 15px 25px; border-radius: 1rem; justify-content: space-between; align-items: center; }
        .bulk-btns button { background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.4); color: white; padding: 8px 15px; border-radius: 0.5rem; cursor: pointer; margin-left: 10px; font-weight: 600; font-family: inherit; }

        /* タスクカード [8] */
        .task-card { background: white; padding: 25px; border-radius: 1.25rem; border: 1px solid #eee; margin: 0 40px 15px; }
        .st-btn { padding: 8px 20px; border-radius: 20px; border: 1px solid #eee; background: white; font-size: 12px; cursor: pointer; color: #999; margin-right: 8px; font-family: inherit; }
        .st-btn.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* 指定: 一括登録入力欄 [2] */
        #bulk-typing-area {
            width: 100%; height: 200px; padding: 15px; border: 1px solid #eee; border-radius: 0.75rem;
            background: #fafafa; font-family: monospace; font-size: 14px; line-height: 1.6;
            box-sizing: border-box; resize: vertical;
        }

        .modal { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 35px; border-radius: 1.5rem; z-index: 1000; box-shadow: 0 20px 80px rgba(0,0,0,0.2); width: 480px; }
        .hidden { display: none; }
        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.4); z-index: 999; }
    </style>
</head>
<body>
    <header>
        <div>
            <h2 style="margin:0;">タスク管理</h2>
            <div class="u-area" id="user-btn">aaa さん <i class="fa-solid fa-chevron-down"></i></div>
        </div>
        <div style="display:flex; gap:10px;">
            <button onclick="openM('import')"><i class="fa-solid fa-file-import"></i> インポート</button>
            <button onclick="openM('bulk')"><i class="fa-solid fa-list-check"></i> 一括登録</button>
            <button onclick="openM('new')" style="background:var(--primary); color:white; border:none; font-weight:700;">+ 新規タスク</button>
        </div>
    </header>

    <div class="stats">
        <div class="stat-card"><div class="ic-box" style="background:#f0efff; color:var(--primary);"><i class="fa-solid fa-list-ul"></i></div><div><b>1</b><br><small>合計</small></div></div>
        <div class="stat-card"><div class="ic-box" style="background:#fff7ed; color:#f97316;"><i class="fa-solid fa-circle-exclamation"></i></div><div><b>1</b><br><small>未着手</small></div></div>
        <div class="stat-card"><div class="ic-box" style="background:#f0f9ff; color:#0ea5e9;"><i class="fa-solid fa-spinner"></i></div><div><b>0</b><br><small>進行中</small></div></div>
        <div class="stat-card"><div class="ic-box" style="background:#f0fdf4; color:#22c55e;"><i class="fa-solid fa-circle-check"></i></div><div><b>0</b><br><small>完了</small></div></div>
    </div>

    <div class="bulk-bar" id="bulk-ui">
        <div><button onclick="selectAll()">すべて選択</button> <span id="sel-txt">1 件選択中</span></div>
        <div class="bulk-btns">
            <button onclick="bulkStatus()"><i class="fa-solid fa-rotate"></i> 状態変更</button>
            <button onclick="bulkCopy()"><i class="fa-solid fa-copy"></i> 一括複製</button>
            <button onclick="bulkDel()" style="background:#ff4d4d; border:none;"><i class="fa-solid fa-trash"></i> 一括削除</button>
        </div>
    </div>

    <div id="task-list">
        <div class="task-card">
            <div style="font-size:18px; font-weight:700;"><input type="checkbox" checked onchange="toggleBulk()"> てすと</div>
            <div style="margin: 10px 0 15px 30px; font-size:12px; color:#888; display:flex; gap:15px; align-items:center;">
                <span><i class="fa-solid fa-flag" style="color:#ff4d4d; margin-right:5px;"></i> 高</span>
                <span style="background:#f0efff; color:var(--primary); padding:2px 8px; border-radius:6px; font-weight:700;">仕事</span>
                <span><i class="fa-solid fa-clock"></i> 期限なし</span>
            </div>
            <div style="margin-left:30px;">
                <button class="st-btn active">未着手</button>
                <button class="st-btn">進行中</button>
                <button class="st-btn">完了</button>
            </div>
        </div>
    </div>

    <div id="overlay" class="overlay hidden" onclick="closeAll()"></div>

    <!-- 一括登録モーダル [2] -->
    <div id="bulk-modal" class="modal hidden">
        <h3><i class="fa-solid fa-list-check"></i> スマート一括登録</h3>
        <p style="font-size:12px; color:#666; margin-bottom:15px;">
            1行に1タスクを「タイトル, 内容, 優先度, カテゴリ, 期限(MMDD)」の形式で入力してください。
        </p>
        <textarea id="bulk-typing-area" placeholder="タスク1, 内容, 高, 仕事, 0520"></textarea>
        <div style="display:flex; gap:10px; margin-top:20px;">
            <button onclick="closeAll()" style="flex:1;">キャンセル</button>
            <button onclick="closeAll()" style="flex:1; background:var(--primary); color:white; border:none; border-radius:0.75rem; font-weight:700;">一括登録を実行</button>
        </div>
    </div>

    <script>
        function openM(type) {
            document.getElementById('overlay').classList.remove('hidden');
            if(type==='bulk') document.getElementById('bulk-modal').classList.remove('hidden');
        }
        function closeAll() {
            document.querySelectorAll('.modal, .overlay').forEach(el => el.classList.add('hidden'));
        }
        function toggleBulk() {
            const count = document.querySelectorAll('input[type="checkbox"]:checked').length;
            const bar = document.getElementById('bulk-ui');
            bar.style.display = count > 0 ? 'flex' : 'none';
            document.getElementById('sel-txt').innerText = `${count} 件選択中`;
        }
        // 初期状態で表示を確認するための呼び出し
        toggleBulk();
    </script>
</body>
</html>
